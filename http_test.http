### Comprehensive API Test Suite
### Run this with VS Code REST Client extension

@baseUrl = http://localhost:7700


### ===========================================
### 1. REGISTRATION AND AUTHENTICATION TESTS
### ===========================================

### Test 1.1: Register Admin User
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "admin1",
  "password": "admin123",
  "userType": "admin",
  "adminKey": "supersecretkey"
}

### Test 1.2: Login as Admin
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

### Test 1.3: Register Student 1
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "student1",
  "password": "student123"
}

### Test 1.4: Register Student 2
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "student2",
  "password": "student123"
}

### Test 1.5: Login as Student 1
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "student1",
  "password": "student123"
}

### Test 1.6: Login as Student 2
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "student2",
  "password": "student123"
}

### ===========================================
### 2. ADMIN OPERATIONS - CREATE TEACHERS
### ===========================================

### Test 2.1: Create Teacher 1 (via Admin)
POST {{baseUrl}}/api/admin/create-teacher
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTk0MTA4NiwiZXhwIjoxNzcyMDI3NDg2fQ.jHuc5pcV0UV2UBvgh1AfX30IERkgG0NscH33ItQopz0
Content-Type: application/json

{
  "username": "teacher1",
  "password": "teacher123"
}

### Test 2.2: Create Teacher 2 (via Admin)
POST {{baseUrl}}/api/admin/create-teacher
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTc3MTkzNjQ4NiwiZXhwIjoxNzcyMDIyODg2fQ.2Qa6TLsWtNjs2GnoQjT6jX-FkAT59Oxn9EHZ9poRFGs
Content-Type: application/json

{
  "username": "teacher2",
  "password": "teacher123"
}


### Test 2.3: Login as Teacher 1
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "teacher1",
  "password": "teacher123"
}

### Test 2.4: Login as Teacher 2
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "teacher2",
  "password": "teacher123"
}


### ===========================================
### 3. USER OPERATIONS
### ===========================================

### Test 3.1: Get All Users
GET {{baseUrl}}/api/users
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTk0MTExMSwiZXhwIjoxNzcyMDI3NTExfQ.FO-V6_xGN2iVnkHE463CHr6MWLp-Q2XNRmKzfuJSQko

### Test 3.2: Get User By ID (Teacher 1)
GET {{baseUrl}}/api/users/1


### ===========================================
### 4. COURSE OPERATIONS
### ===========================================

### Test 4.1: Create Course (Teacher 3)
POST {{baseUrl}}/api/courses
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTk0MTExMSwiZXhwIjoxNzcyMDI3NTExfQ.FO-V6_xGN2iVnkHE463CHr6MWLp-Q2XNRmKzfuJSQko
Content-Type: application/json

{
  "className": "Mathematic2s 108",
  "topic": "mat"
}


### Test 4.3: Get All Courses
GET {{baseUrl}}/api/courses
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTk0MTExMSwiZXhwIjoxNzcyMDI3NTExfQ.FO-V6_xGN2iVnkHE463CHr6MWLp-Q2XNRmKzfuJSQko


### Test 4.4: Get Course By ID (Course 1)
GET {{baseUrl}}/api/courses/73
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTk0MTExMSwiZXhwIjoxNzcyMDI3NTExfQ.FO-V6_xGN2iVnkHE463CHr6MWLp-Q2XNRmKzfuJSQko


### ===========================================
### 5. PARTICIPANT / ENROLLMENT OPERATIONS
### ===========================================

### Test 5.1: Enroll Student 1 in Course 1
POST {{baseUrl}}/api/participants/enroll
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTk0MTExMSwiZXhwIjoxNzcyMDI3NTExfQ.FO-V6_xGN2iVnkHE463CHr6MWLp-Q2XNRmKzfuJSQko
Content-Type: application/json

{
  "userId": 162,
  "classId": 73
}



### Test 5.4: Get Users in Course 1
GET {{baseUrl}}/api/participants/class/73
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTk0MTExMSwiZXhwIjoxNzcyMDI3NTExfQ.FO-V6_xGN2iVnkHE463CHr6MWLp-Q2XNRmKzfuJSQko


### Test 5.5: Get Courses for Student 1
GET {{baseUrl}}/api/participants/user/162
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTk0MTExMSwiZXhwIjoxNzcyMDI3NTExfQ.FO-V6_xGN2iVnkHE463CHr6MWLp-Q2XNRmKzfuJSQko




### ===========================================
### 6. MATERIAL OPERATIONS
### ===========================================

### Test 6.1: Upload Material 1 to Course 1 (Teacher 1)
POST {{baseUrl}}/api/materials
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTk0MTExMSwiZXhwIjoxNzcyMDI3NTExfQ.FO-V6_xGN2iVnkHE463CHr6MWLp-Q2XNRmKzfuJSQko
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="lecture_notes.txt"
Content-Type: text/plain

This is a test lecture notes file for Mathematics 101

------WebKitFormBoundary
Content-Disposition: form-data; name="classId"

1
------WebKitFormBoundary
Content-Disposition: form-data; name="userId"

2
------WebKitFormBoundary
Content-Disposition: form-data; name="materialType"

lecture_notes
------WebKitFormBoundary--


### Test 6.3: Get Materials for Course 1
GET {{baseUrl}}/api/materials/course/1

### Test 6.4: Get Material By ID (Material 1)
GET {{baseUrl}}/api/materials/2


### ===========================================
### 7. REVIEW OPERATIONS
### ===========================================

### Test 7.1: Create Review for Material 1 (Student 1)


### Test 7.3: Create Review for Material 1 (Student 2)
POST {{baseUrl}}/api/reviews
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0ZWFjaGVyMSIsImlhdCI6MTc3MTkzNjUxNywiZXhwIjoxNzcyMDIyOTE3fQ.17jfvtk3VUWb1r2dw8FG7a8Fl4d2JZtIlz1QRoGgKUs
Content-Type: application/json

{
  "review": "Good content but could be more detailed",
  "rating": 4,
  "fileId": 2
}

### Test 7.4: Get Reviews for Material 1
GET {{baseUrl}}/api/reviews/material/2

### Test 7.5: Get Review By ID (Review 1)
GET {{baseUrl}}/api/reviews/1

### Test 7.6: Update own Review (Student 1)
PUT {{baseUrl}}/api/reviews/1
Authorization: Bearer {{student1Token}}
Content-Type: application/json

{
  "review": "Excellent material, very clear and comprehensive",
  "rating": 5
}

### Test 7.10: Delete own Review (Student 1)
DELETE {{baseUrl}}/api/reviews/1
Authorization: Bearer {{student1Token}}

### ===========================================
### 9. FILE DOWNLOAD TEST
### ===========================================

### Test 9.1: Download Material File (Material 1)
GET {{baseUrl}}/api/materials/2/download
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJzdHVkZW50MSIsImlhdCI6MTc3MTk0MDk4MywiZXhwIjoxNzcyMDI3MzgzfQ.Ybu-qeGTaxqnjlCCMNVbdbC0ffcDmViKJovzF2RzR0Q